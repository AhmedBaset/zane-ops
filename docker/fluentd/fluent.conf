<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<filter zane.*>
  @type record_transformer
  enable_ruby true
  <record>
    time ${time.strftime('%Y-%m-%dT%H:%M:%S%z')}
    service ${tag_suffix[1]}
    tag ${tag}
  </record>
</filter>

<match zane.*>
  @type http
  endpoint http://host.docker.internal:8000/api/container/collect-logs
  http_method post
  json_array true
  open_timeout 5
  <format>
     @type json
  </format>
  <buffer>
    flush_interval 5s
  </buffer>
</match>

<match **>
    @type stdout
</match>
